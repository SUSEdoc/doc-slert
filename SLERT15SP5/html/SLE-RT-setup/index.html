<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>SUSE Linux Enterprise RT 15 SP5 | Setup Guide</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Setup Guide | SUSE Linux Enterprise RT 15 SP5"/>
<meta name="description" content="SUSE Linux Enterprise Real Time is part of SUSE® Linux…"/>
<meta name="product-name" content="SUSE Linux Enterprise Real Time"/>
<meta name="product-number" content="15 SP5"/>
<meta name="book-title" content="Setup Guide"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="thomas.schraitle@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Real Time 15 SP5"/>
<meta name="publisher" content="SUSE"/><meta property="og:title" content="Setup Guide | SUSE Linux Enterprise RT 15 SP5"/>
<meta property="og:description" content="SUSE Linux Enterprise Real Time is part of SUSE® Linux Enterprise family. It allows you to run tasks which require determini…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Setup Guide | SUSE Linux Enterprise RT 15 SP5"/>
<meta name="twitter:description" content="SUSE Linux Enterprise Real Time is part of SUSE® Linux Enterprise family. It allows you to run tasks which require determini…"/>
<link rel="prev" href="book-slert-qs.html" title="Quick Start Guides"/><link rel="next" href="bk02ar01apa.html" title="A. GNU Licenses"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Setup Guide</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Setup Guide</div> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="article" id="article-setup" data-id-title="Setup Guide"><div class="titlepage"><div><div class="big-version-info"><span class="productname">SUSE Linux Enterprise Real Time</span> <span class="productnumber">15 SP5</span></div><div><div class="title-container"><h1 class="title">Setup Guide <a title="Permalink" class="permalink" href="article-setup.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div><div class="date"><span class="imprint-label">Publication Date: </span>
01/11/2024
</div><div><div class="abstract"><p>
    SUSE Linux Enterprise Real Time is part of SUSE® Linux Enterprise family. It allows you to run tasks which
    require deterministic real-time processing in a SUSE Linux Enterprise environment.
   </p><p>
    To meet this requirement, SUSE Linux Enterprise Real Time offers several options for CPU and I/O
    scheduling, CPU shielding, and for setting CPU affinities of processes.
   </p></div></div></div></div><div><div class="legalnotice" id="id-1.4.2.2.3"><p>
  Copyright © 2006–2024

  SUSE LLC and contributors. All rights reserved.
 </p><p>
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.2 or (at
  your option) version 1.3; with the Invariant Section being this copyright
  notice and license. A copy of the license version 1.2 is included in the
  section entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
 </p><p>
  For SUSE trademarks, see
  <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>. All other
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p><p>
  All information found in this book has been compiled with utmost attention
  to detail. However, this does not guarantee complete accuracy. Neither
  SUSE LLC, its affiliates, the authors nor the translators shall be held
  liable for possible errors or the consequences thereof.
 </p></div></div><section class="sect1" id="sec-slert-quick-overview" data-id-title="Product overview"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Product overview</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-overview">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   If your business can respond more quickly to new information and changing
   market conditions, you have a distinct advantage over those that cannot.
   Running your time-sensitive mission-critical applications using SUSE Linux Enterprise Real Time
   reduces process dispatch latencies and gives you the time advantage you need
   to increase profits, or avoid further financial losses, ahead of your
   competitors.
  </p><section class="sect2" id="sec-slert-quick-key-features" data-id-title="Key features"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">Key features</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-key-features">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Some of the key features for SUSE Linux Enterprise Real Time are:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      Pre-emptible real-time kernel.
     </p></li><li class="listitem"><p>
      Ability to assign high-priority processes.
     </p></li><li class="listitem"><p>
      Greater predictability to complete critical processes on time, every
      time.
     </p><p>
      In comparison to the normal Linux kernel, which is optimized for overall
      system performance regardless of individual process response time, the
      SUSE Linux Enterprise Real Time kernel is tuned toward predictable process response time.
     </p></li><li class="listitem"><p>
      Increased reliability.
     </p></li><li class="listitem"><p>
      Lower infrastructure costs.
     </p></li><li class="listitem"><p>
      Tracing and debugging tools that help you analyze and identify
      bottlenecks in mission-critical applications.
     </p></li></ul></div></section><section class="sect2" id="sec-slert-quick-scenarios" data-id-title="Specific scenario"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2 </span><span class="title-name">Specific scenario</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-scenarios">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    SUSE Linux Enterprise Real Time 15 SP5 supports virtualization and Docker usage as a
    Technology Preview (best-effort support). For reference, see
    <span class="intraxref">Article “Virtualization Guide”</span>.
   </p></section></section><section class="sect1" id="sec-slert-quick-install" data-id-title="Installing SUSE Linux Enterprise Real Time"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Installing SUSE Linux Enterprise Real Time</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-install">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Keep the following points in mind:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Boot from the quarterly update medium. SUSE Linux Enterprise Real Time is only
     available from the quarterly update medium as this product is released
     roughly three months later than the rest of the SLE.
     
    </p></li><li class="listitem"><p>
     Refer to the <em class="citetitle">Installation Quick Start</em> of SUSE Linux Enterprise Server 15 SP5
     <a class="link" href="https://documentation.suse.com/sles/15-SP4/#redirectmsg" target="_blank">https://documentation.suse.com/sles/15-SP4/#redirectmsg</a> to install
     SUSE Linux Enterprise Real Time.
    </p></li><li class="listitem"><p>
     In the <span class="guimenu">Language, keyboard, and product selection</span>, select
     the entry <span class="guimenu">SUSE Linux Enterprise Real Time</span>.
    </p></li></ul></div><p>To install SUSE Linux Enterprise Real Time 15 SP5, proceed as follows:</p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>Start the normal SUSE Linux Enterprise 15 SP5.</p></li><li class="step"><p>On the boot command line, add <code class="literal">start_shell=1</code>.
    </p></li><li class="step"><p>When the prompt shows up, open the file <code class="filename">control.xml</code> and add the
    following lines:</p><div class="verbatim-wrap"><pre class="screen">&lt;base_product&gt;
  &lt;display_name&gt;SUSE Linux Enterprise Real Time 15 SP5&lt;/display_name&gt;
  &lt;name&gt;SLE_RT&lt;/name&gt;
  &lt;version&gt;15.5&lt;/version&gt;
  &lt;register_target&gt;sle-15-$arch&lt;/register_target&gt;
  &lt;archs&gt;x86_64&lt;/archs&gt;
&lt;/base_product&gt;</pre></div></li><li class="step"><p>Save the file, exit the editor, and restart YaST</p></li><li class="step"><p>Select <span class="guimenu">SUSE Linux Enterprise Real Time 15 SP5</span> from the product selection list.
    </p></li><li class="step"><p>Continue with the normal installation. The rest is the same of the other product installation.</p></li><li class="step"><p>Reboot and select the real time kernel.</p></li></ol></div></div><p>
   The following sections provide a brief introduction to the tools and
   possibilities of SUSE Linux Enterprise Real Time.
  </p></section><section class="sect1" id="sec-slert-quick-cset" data-id-title="Managing CPU sets with cset"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Managing CPU sets with <code class="command">cset</code></span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-cset">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   In some circumstances, it is beneficial to be able to run specific tasks
   only on defined CPUs. For this reason, the Linux kernel provides a
   feature called <span class="emphasis"><em>cpuset</em></span>. The <code class="systemitem">cpuset</code> feature provides the
   means to do so-called <span class="quote">“<span class="quote">soft partitioning</span>”</span> of the system. This
   enables you to dedicate CPUs, together with some predefined memory,
   to work on particular tasks.
  </p><div id="id-1.4.2.5.3" data-id-title="CPUs, processors, and cores" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: CPUs, processors, and cores</div><p>
    Modern servers are typically built around multi-core CPUs, which means that
    a single processor socket typically contains many separate processor units.
    For example, a low-end processor might have four cores, while a high-end one
    may have from tens to hundreds of cores.
   </p><p>
    Secondarily, some vendors support simultaneous multithreading (SMT), which
    enables a single core to support two or more execution threads which can be
    partially overlapped. The processor makes this visible to the operating
    system by reporting each threads as an additional core.
   </p><p>
    The <code class="systemitem">cpuset</code> feature works on the level of logical processors: individual
    cores or SMT units, not processor sockets. When this document
    refers to <span class="quote">“<span class="quote">a CPU</span>”</span>, this denotes a logical processor.
   </p></div><p>
   <code class="command">cset</code> consists of one <span class="quote">“<span class="quote">super command</span>”</span> called
   <code class="command">shield</code> and the <span class="quote">“<span class="quote">regular commands</span>”</span>
   <code class="command">set</code> and <code class="command">proc</code>. The purpose of the super
   command <code class="command">shield</code> is to create a common CPU shielding setup
   within one step by combining regular commands.
  </p><p>
   For more information about the options and parameters of the
   <code class="command">shield</code> subcommand, view its help by running:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> help shield</pre></div><section class="sect2" id="sec-slert-quick-settingup-cpushield-single" data-id-title="Setting up a CPU shield for a single CPU"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.1 </span><span class="title-name">Setting up a CPU shield for a single CPU</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-settingup-cpushield-single">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    The command <code class="command">cset</code> provides the high level functionality
    to set up and manipulate CPU Sets. An example for setting up a CPU shield
    is:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --cpu=3</pre></div><p>
    On a machine with four CPUs, this will shield CPU #3. CPUs #0-2 are
    unshielded.
   </p></section><section class="sect2" id="sec-slert-quick-settingup-cpushield-multi" data-id-title="Setting up CPU shields for multiple CPUs"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.2 </span><span class="title-name">Setting up CPU shields for multiple CPUs</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-settingup-cpushield-multi">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    If you need to shield more than one CPU, the argument of the
    <code class="option">--cpu</code> option accepts comma-separated lists of CPUs,
    including range specifications:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --cpu=1,3,5-7</pre></div><p>
    On a machine with eight CPUs, this command will shield CPUs #1, #3,
    and #5-7. CPUs #0, #2, and #4 will remain unshielded.
   </p><p>
    Existing CPU shields can be extended by the same command. For example, to
    add CPU #4 to the CPU set described above, use this command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --cpu=1,3-7</pre></div><p>
    This command updates the current CPU shield schema. CPUs #1, #3, and
    #5-6 were already shielded. Afterward, CPU #4 will also be shielded.
   </p><p>
    To reduce the number of shielded CPUs, redefine the scheme so as to exclude
    the CPUs you wish to unshield. For example, to unshield CPU #1, use the
    following command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --cpu=3-7</pre></div><p>
    Now only CPUs #3-7 are shielded. CPUs #0-2 are available for system usage.
   </p></section><section class="sect2" id="sec-slert-quick-showing-cpu-shields" data-id-title="Showing CPU shields"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.3 </span><span class="title-name">Showing CPU shields</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-showing-cpu-shields">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After the CPU shielding is set up you can display the current configuration
    by running <code class="command">cset shield</code> without additional options:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield
cset: --&gt; shielding system active with
cset: "system" cpuset of: 0-2 cpu, with: 47
cset: "user" cpuset of:  3-7 cpu,  with: 0</pre></div><p>
    By default, CPU shielding consists of at least of three <code class="systemitem">cpuset</code>s:
   </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
      <code class="systemitem">root</code> exists always and contains
      all available CPUs.
     </p></li><li class="listitem"><p>
      <code class="systemitem">system</code> is the <code class="systemitem">cpuset</code> of
      unshielded CPUs.
     </p></li><li class="listitem"><p>
      <code class="systemitem">user</code> is the <code class="systemitem">cpuset</code> of
      shielded CPUs
     </p></li></ul></div></section><section class="sect2" id="sec-slert-quick-shielding-processes" data-id-title="Shielding processes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.4 </span><span class="title-name">Shielding processes</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-shielding-processes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    After a shielded CPU set is created, certain processes or groups of
    processes can be assigned to the shielded <code class="systemitem">cpuset</code>. To start a new process
    in the shielded CPU set, use the <code class="option">--exec</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --exec <em class="replaceable">APPLICATION</em></pre></div><p>
    To move already-running processes to the shielded CPU set, use the
    <code class="option">--shield</code> and <code class="option">--pid</code> options. The
    <code class="option">--pid</code> option accepts a comma-separated list of PIDs and
    range specifications:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --shield --pid=1,2,600-700</pre></div><p>
    This moves processes with PID 1, 2, and from 600 to 700 to the shielded
    CPU set. If there is a gap in the range from 600 to 700, then only those
    available process will be moved to the shield without warning.
    The <code class="command">cset</code> command handles threads like processes and will
    also interpret TIDs and assign them to the required CPU set.
   </p><div id="id-1.4.2.5.10.7" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>
     The <code class="option">--shield</code> option does not check the processes you
     request to move into the shield. This means that the command will move
     <span class="emphasis"><em>any</em></span> processes that are bound to specific
     CPUs—even kernel threads. You can cause a complete system lockup by
     indiscriminately specifying arbitrary PIDs to the
     <code class="option">--shield</code> command.
    </p></div></section><section class="sect2" id="sec-slert-quick-showing-shielded-processes" data-id-title="Showing shielded processes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.5 </span><span class="title-name">Showing shielded processes</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-showing-shielded-processes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Use the <code class="command">cset shield</code> command to show the number of
    currently shielded processes. (The same command can be used to show the
    current CPU shield setup.) To list shielded and unshielded processes, add
    the <code class="command">--verbose</code> option:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --verbose
cset: --&gt; shielding system active with
cset: "system" cpuset of: 0-2,4-15 cpu, with:
   USER       PID  PPID S TASK NAME
      -------- ----- ----- - ---------
         root         1     0 S init [3]
[...]

cset: "user" cpuset of:    3 cpu, with: 1
   USER       PID  PPID S TASK NAME
      -------- ----- ----- - ---------
         root     10202 10170 S application</pre></div></section><section class="sect2" id="sec-slert-quick-unshielding-processes" data-id-title="Unshielding processes"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.6 </span><span class="title-name">Unshielding processes</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-unshielding-processes">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To remove a process (or group of processes) from the CPU shield, use the
    <code class="option">--unshield</code> option. The argument for
    <code class="option">--unshield</code> is similar to the <code class="option">--shield</code>
    option. This option accepts a comma-separated list of PIDs/TIDs and range
    specifications:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> shield --unshield --pid=2,650-655</pre></div><p>
    This command will unshield the process with the PID <code class="literal">2</code> and
    the processes in the range between 650 and 655.
   </p></section><section class="sect2" id="sec-slert-quick-resetting-cpusets" data-id-title="Resetting CPU sets"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">3.7 </span><span class="title-name">Resetting CPU sets</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-quick-resetting-cpusets">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    To delete CPU sets, use the <code class="command">cset</code> option
    <code class="option">--reset</code>. This will unshield all CPUs and migrate dedicated
    processes to all available CPUs again.
   </p></section></section><section class="sect1" id="sec-slert-csets-tree" data-id-title="Managing tree-like structures with cset"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Managing tree-like structures with <code class="command">cset</code></span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-slert-csets-tree">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   More detailed configuration of cpusets can be done with the
   <code class="command">cset</code> commands <code class="option">set</code> and
   <code class="option">proc</code>.
  </p><p>
   The subcommand <code class="option">set</code> is used to create, modify and destroy
   <code class="systemitem">cpuset</code>s. Compared to the supercommand <code class="option">shield</code>, the
   <code class="option">set</code> subcommand can additionally assign memory nodes for
   NUMA machines.
  </p><p>
   Besides assigning memory nodes, the subcommand <code class="command">set</code>
   creates cpusets in a tree-like structure, rooted at the
   <code class="systemitem">root</code> <code class="systemitem">cpuset</code>.
  </p><p>
   To create a <code class="systemitem">cpuset</code> with the subcommand <code class="command">set</code> you need to
   specify the CPUs which should be used. Either use a comma-separated list or
   a range specification:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set --cpu=1-7 "/one"</pre></div><p>
   This command will create a <code class="systemitem">cpuset</code> called <code class="systemitem">one</code> with
   assigned CPUs from #1 to #7. To specify a new <code class="systemitem">cpuset</code> called
   <code class="systemitem">two</code> that is a subset of
   <code class="systemitem">one</code>, proceed as follows:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set --cpu=6 "/one/two"</pre></div><p>
   Cpusets follow certain rules. Children can only include CPUs that the
   parents already have. If you try to specify a different <code class="systemitem">cpuset</code>, the kernel
   <code class="systemitem">cpuset</code> subsystem will not let you create that <code class="systemitem">cpuset</code>. For example, if
   you create a <code class="systemitem">cpuset</code> that contains CPU3, and then attempt to create a child
   of that <code class="systemitem">cpuset</code> with a CPU other than 3, you will get an error, and the
   <code class="systemitem">cpuset</code> will not be created. The resulting error is somewhat cryptic and is
   usually <span class="quote">“<span class="quote">Permission denied</span>”</span>.
  </p><p>
   To show a table containing useful information, such as CPU lists and memory
   lists, use the <code class="option">-r</code> parameter. The <span class="quote">“<span class="quote">-X</span>”</span> column
   shows the exclusive state of CPU or memory. The <span class="quote">“<span class="quote">path</span>”</span> column
   shows the real path in the virtual <code class="systemitem">cpuset</code> file system.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set -r</pre></div><p>
   On NUMA machines, memory nodes can be assigned to a <code class="systemitem">cpuset</code> similar to CPUs.
   The <code class="option">--mem</code> option of the subcommand <code class="command">set</code>
   allows a comma-separated and inclusive range specification of memory nodes.
   This example will assign MEM1, MEM3, MEM4, MEM5 and MEM6 to the <code class="systemitem">cpuset</code>
   <code class="systemitem">new_set</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set --mem=1,3-6 new_set</pre></div><p>
   Additionally, with the <code class="option">--cpu_exclusive</code> and
   <code class="option">--mem_exclusive</code> options (without any additional arguments)
   set the CPUs or memory nodes exclusive to a <code class="systemitem">cpuset</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set --cpu_exclusive "/one"</pre></div><p>
   The status of exclusive state of CPU or memory is shown in the
   <code class="option">-X</code> column when running:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> set -r</pre></div><p>
   For more detailed information about options and parameters of the subcommand
   <code class="command">set</code>, view the <code class="command">cset</code> help:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> help set</pre></div><p>
   After the <code class="systemitem">cpuset</code> is initialized, the subcommand <code class="command">proc</code>
   can start processes on certain <code class="systemitem">cpuset</code>s with the <code class="option">--exec</code>
   option. The following will start the application
   <code class="systemitem">fastapp</code> within the <code class="systemitem">cpuset</code>
   <code class="systemitem">new_set</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> proc --exec --set new_set fastapp</pre></div><p>
   To move an already-running process inside an already-existing <code class="systemitem">cpuset</code>, use
   the option <code class="option">--move</code>. It accepts a comma-separated list and
   range specifications of PIDs. The following command will move processes with
   PID 2442 and within the range between 3000 and 3200 into the <code class="systemitem">cpuset</code>
   <code class="systemitem">new_set</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> proc --move 2442,3000-3200 new_set</pre></div><p>
   Listing processes running within a specific <code class="systemitem">cpuset</code> can be done by using
   the option <code class="option">--list</code>.
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> proc --list new_set</pre></div><p>
   The subcommand <code class="command">proc</code> can also move the entire list of
   processes within one cpuset to another <code class="systemitem">cpuset</code> by using the option
   <code class="option">--fromset</code> and <code class="option">--toset</code>. This will move all
   process assigned to <code class="systemitem">old_set</code> and assign them to
   <code class="systemitem">new_set</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> proc --move --fromset old_set \
   --toset new_set</pre></div><p>
   For more detailed information about options and parameters of the subcommand
   <code class="command">proc</code>, view the help:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cset</code> help proc</pre></div></section><section class="sect1" id="sec-quick-chrt" data-id-title="Setting Real-time Attributes of a Process with chrt"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Setting Real-time Attributes of a Process with <code class="command">chrt</code></span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-chrt">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Use the <code class="command">chrt</code> command to manipulate the real-time
   attributes of an already-running process (such as scheduling policy and
   priority), or to execute a new process with specified real-time attributes.
  </p><p>
   It is highly recommended for applications which do not use real-time
   specific attributes by themselves, but should nevertheless experience the
   full advantages of real-time. To get full real-time experiences, call these
   applications with the <code class="command">chrt</code> command and the right set of
   scheduler policy and priority parameters.
  </p><p>
   With the following command, all running processes with their real-time
   specific attributes are shown. The selection <code class="literal">class</code> shows
   the current scheduler policy and <code class="literal">rtprio</code> the real-time
   priority:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">ps</code> -eo pid,tid,class,rtprio,comm
...
 1437  1437 FF      40  fastapp</pre></div><p>
   The truncated example above shows the <code class="systemitem">fastapp</code>
   process with PID 1437 running and with scheduler policy
   <code class="literal">SCHED_FIFO</code> and priority 40. Scheduler policy
   abbreviations are:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="literal">TS - SCHED_OTHER</code>
    </p></li><li class="listitem"><p>
     <code class="literal">FF - SCHED_FIFO</code>
    </p></li><li class="listitem"><p>
     <code class="literal">RR - SCHED_RR</code>
    </p></li></ul></div><p>
   It is also possible to obtain the current scheduler policy, and the priority
   of single processes, by specifying the PID of the process with the
   <code class="option">-p</code> parameter. For example:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">chrt</code> -p 1437</pre></div><p>
   Scheduler policies have different minimum and maximum priority values.
   Minimum and maximum values for each available scheduler policy can be
   retrieved with <code class="command">chrt</code>:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">chrt</code> -m</pre></div><p>
   To change the scheduler policy and the priority of a running process,
   <code class="command">chrt</code> provides the options <code class="option">--fifo</code> for
   <code class="literal">SCHED_FIFO</code>, <code class="option">--rr</code> for
   <code class="literal">SCHED_RR</code> and <code class="option">--other</code> for
   <code class="literal">SCHED_OTHER</code>. The following example will change the
   scheduler policy to <code class="literal">SCHED_FIFO</code> with priority 42 for PID
   1437:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">chrt</code> --fifo -p 42 1437</pre></div><div id="id-1.4.2.7.14" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>
    Handle the changing of real-time attributes of processes with care.
    Increasing the priority of certain processes can harm the entire system,
    depending on the behavior of the process. In some cases, this can lead to a
    complete system lockup or bad influences on certain devices.
   </p></div><p>
   For more information about <code class="command">chrt</code>, see the
   <code class="command">chrt</code> man page with <code class="command">man 1 chrt</code>.
  </p></section><section class="sect1" id="sec-quick-taskset" data-id-title="Specifying CPU affinity with taskset"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">6 </span><span class="title-name">Specifying CPU affinity with <code class="command">taskset</code></span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-taskset">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The default behavior of the kernel is to keep a process running on the same
   CPU if the system load is balanced over the available CPUs. Otherwise, the
   kernel tries to improve the load balancing by moving processes to an idling
   CPU. In some situations, however, it is desirable to set a CPU affinity for
   a given process. In this case, the kernel will not move the process away
   from the selected CPUs. For example, if you use shielding, the shielded CPUs
   will not run any processes that do not have an affinity to the shielded
   CPUs. Another possibility to remove load from the other CPUs is to run all
   low priority tasks on a selected CPU.
  </p><p>
   If a task is running inside a specific <code class="systemitem">cpuset</code>, the affinity dialog must
   match at least one of the CPUs available in this set. The
   <code class="command">taskset</code> command will not move a process outside the
   <code class="systemitem">cpuset</code> it is running in.
  </p><p>
   To set or retrieve the CPU affinity of a task, use a bitmask. This mask is
   represented by a hexadecimal number. If you count the bits of this bitmask,
   the lowest bit represents the first logical CPU as found in
   <code class="filename">/proc/cpuinfo</code>. For example:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     <code class="literal">0x00000001</code> means CPU <code class="literal">0</code>.
    </p></li><li class="listitem"><p>
     <code class="literal">0x00000002</code> means CPU <code class="literal">1</code>.
    </p></li><li class="listitem"><p>
     <code class="literal">0x00000003</code> means CPUs <code class="literal">0</code> and
     <code class="literal">1</code>.
    </p></li><li class="listitem"><p>
     <code class="literal">0xFFFFFFFE</code> means all but the first CPU.
    </p></li></ul></div><p>
   If a given dialog does not contain any valid CPU on the system, the
   <code class="command">taskset</code> command will return an error. If
   <code class="command">taskset</code> returns without an error, the given program has
   been scheduled to the specified list of CPUs.
  </p><p>
   The command <code class="command">taskset</code> starts a new process with a given CPU
   affinity, or to redefine the CPU affinity of an already running process.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Examples </span></span><a title="Permalink" class="permalink" href="article-setup.html#id-1.4.2.8.8">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.4.2.8.8.2"><span class="term"><code class="option">taskset -p <em class="replaceable">PID</em></code></span></dt><dd><p>
      Retrieves the current CPU affinity of the process with PID
      <em class="replaceable">pid</em>.
     </p></dd><dt id="id-1.4.2.8.8.3"><span class="term"><code class="option">taskset -p <em class="replaceable">mask</em><em class="replaceable">PID</em></code></span></dt><dd><p>
      Sets the CPU affinity of the process with the
      <em class="replaceable">PID</em> to <em class="replaceable">mask</em>.
     </p></dd><dt id="id-1.4.2.8.8.4"><span class="term"><code class="option">taskset <em class="replaceable">mask</em><em class="replaceable">command</em></code></span></dt><dd><p>
      Runs <em class="replaceable">command</em> with a CPU affinity of
      <code class="literal">mask</code>.
     </p></dd></dl></div><p>
   For more detailed information about <code class="command">taskset</code>, see the man
   page <code class="command">man 1 taskset</code>.
  </p></section><section class="sect1" id="sec-quick-ionice" data-id-title="Changing I/O priorities with ionice"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Changing I/O priorities with <code class="command">ionice</code></span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-ionice">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   Handling I/O is one of the critical issues for all high-performance systems.
   If a task has lots of CPU power available, but must wait for the disk, it
   will not work as efficiently as it could. The Linux kernel provides three
   different scheduling classes to determine the I/O handling for a process.
   All of these classes can be fine-tuned with a <code class="literal">nice</code> level.
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.2.9.3.1"><span class="term">The <span class="emphasis"><em>Best Effort</em></span> scheduler</span></dt><dd><p>
      The <span class="emphasis"><em>Best Effort</em></span> scheduler is the default I/O
      scheduler, and is used for all processes that do not specify a different
      I/O scheduler class. By default, this scheduler sets its
      <code class="literal">nice</code> level according to the nice value of the running
      process.
     </p><p>
      There are eight different <code class="literal">nice</code> levels available for
      this scheduler. The lowest priority is represented by a
      <code class="literal">nice</code> level of <code class="literal">7</code>, and the highest
      priority is <code class="literal">0</code>.
     </p><p>
      This scheduler has the scheduling class number <code class="literal">2</code>.
     </p></dd><dt id="id-1.4.2.9.3.2"><span class="term">The <span class="emphasis"><em>Real Time</em></span> scheduler</span></dt><dd><p>
      The real-time I/O class always gets the highest priority for disk access.
      The other schedulers will only be served if no real-time request is
      present. This scheduling class may easily lock up the system if not
      implemented with care.
     </p><p>
      The real-time scheduler defines <code class="literal">nice</code> levels (similar to
      the <span class="emphasis"><em>Best Effort</em></span> scheduler).
     </p><p>
      This scheduler has the scheduling class number <code class="literal">1</code>.
     </p></dd><dt id="id-1.4.2.9.3.3"><span class="term">The <span class="emphasis"><em>Idle</em></span> scheduler</span></dt><dd><p>
      The <span class="emphasis"><em>Idle</em></span> scheduler does not define any
      <code class="literal">nice</code> levels. I/O is only done in this class if no other
      scheduler is running an I/O request. This scheduler has the lowest
      available priority and can be used for processes that are not
      time-critical.
     </p><p>
      This scheduler has the scheduling class number <code class="literal">3</code>.
     </p></dd></dl></div><p>
   To change I/O schedulers and <code class="literal">nice</code> values, use the
   <code class="command">ionice</code> command. This provides a means to tune the
   scheduler of already-running processes, or to start new processes with
   specific I/O settings.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">Examples </span></span><a title="Permalink" class="permalink" href="article-setup.html#id-1.4.2.9.5">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.4.2.9.5.2"><span class="term"><code class="command">ionice -c3 -p$$</code></span></dt><dd><p>
      Sets the scheduler of the current shell to <code class="literal">Idle</code>.
     </p></dd><dt id="id-1.4.2.9.5.3"><span class="term"><code class="command">ionice</code></span></dt><dd><p>
      Without additional parameters, this prints the I/O scheduler settings of
      the current shell.
     </p></dd><dt id="id-1.4.2.9.5.4"><span class="term"><code class="command">ionice -c1 -p42 -n2</code></span></dt><dd><p>
      Sets the scheduler of the process with process ID 42 to <code class="literal">Real
      Time</code>, and its <code class="literal">nice</code> value to
      <code class="literal">2</code>.
     </p></dd><dt id="id-1.4.2.9.5.5"><span class="term"><code class="command">ionice -c3 /bin/bash</code></span></dt><dd><p>
      Starts the Bash shell with the <code class="literal">Idle</code> I/O scheduler.
     </p></dd></dl></div><p>
   For more detailed information about <code class="command">ionice</code>, see the
   <code class="command">ionice</code> man page with <code class="command">man 1 ionice</code>
  </p></section><section class="sect1" id="sec-quick-io-block-change" data-id-title="Changing the I/O scheduler for block devices"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">8 </span><span class="title-name">Changing the I/O scheduler for block devices</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-io-block-change">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The Linux kernel provides several block device schedulers that can be
   selected individually for each block device. All but the
   <code class="literal">noop</code> scheduler perform a kind of ordering of requested
   blocks to reduce head movements on the hard disk. If you use an external
   storage system that has its own scheduler, you should disable the Linux
   internal reordering by selecting the <code class="literal">noop</code> scheduler.
  </p><div class="variablelist"><div class="title-container"><div class="variablelist-title-wrap"><div class="variablelist-title"><span class="title-number-name"><span class="title-name">The Linux I/O schedulers </span></span><a title="Permalink" class="permalink" href="article-setup.html#id-1.4.2.10.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div><dl class="variablelist"><dt id="id-1.4.2.10.3.2"><span class="term">noop</span></dt><dd><p>
      The <span class="emphasis"><em>noop</em></span> scheduler is a very simple scheduler that
      performs basic merging and sorting on I/O requests. This scheduler is
      mainly used for specialized environments that run their own schedulers
      optimized for the used hardware, such as storage systems or hardware RAID
      controllers.
     </p></dd><dt id="id-1.4.2.10.3.3"><span class="term">deadline</span></dt><dd><p>
      The main point of <span class="emphasis"><em>deadline</em></span> scheduling is to try hard
      to answer a request before a given deadline. This results in very good
      I/O for a random single I/O in real-time environments.
     </p><p>
      In principle, the <span class="emphasis"><em>deadline</em></span> scheduler uses two lists
      with all requests. One is sorted by block sequences to reduce seeking
      latencies, the other is sorted by expire times for each request.
      Normally, requests are served according to the block sequence, but if a
      request reaches its deadline, the scheduler starts to work on this
      request.
     </p></dd><dt id="id-1.4.2.10.3.4"><span class="term">cfq</span></dt><dd><p>
      The <span class="emphasis"><em>Completely Fair Queuing</em></span> scheduler uses a
      separate I/O queue for each process. All of these queues get a similar
      time slice for disk access. With this procedure, the
      <span class="emphasis"><em>CFQ</em></span> tries to divide the bandwidth evenly between all
      requesting processes. This scheduler allows throughput similar to the
      <span class="emphasis"><em>anticipatory</em></span> scheduler, but the maximum latency is
      much shorter.
     </p><p>
      For the average system, this scheduler yields the best results, and thus
      it is the default I/O scheduler on SUSE Linux Enterprise systems.
     </p></dd></dl></div><p>
   To print the current scheduler of a block device such as
   <code class="filename">/dev/sda</code>, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">cat</code> /sys/block/sda/queue/scheduler
noop deadline [cfq]</pre></div><p>
   In this case, the scheduler for <code class="filename">/dev/sda</code> is set to
   <code class="literal">cfq</code>, the <code class="literal">Completely Fair Queuing</code>
   scheduler. This is the default scheduler on SUSE Linux Enterprise Real Time.
  </p><p>
   To change the schedulers, echo one of the names <code class="literal">noop</code>,
   <code class="literal">deadline</code>, or <code class="literal">cfq</code> into
   <code class="filename">/sys/block/&lt;device&gt;/scheduler</code>. For example, if
   you want to set the I/O scheduler of the device
   <code class="filename">/dev/sda</code> to <code class="literal">noop</code>, use the following
   command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="command">echo</code> "noop" &gt; /sys/block/sda/queue/scheduler</pre></div><p>
   To set other variables in the <code class="filename">/sys</code> file system, use a
   similar approach.
  </p></section><section class="sect1" id="sec-quick-io-block-tune" data-id-title="Tuning the block device I/O scheduler"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">9 </span><span class="title-name">Tuning the block device I/O scheduler</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-io-block-tune">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   All schedulers, except for the <span class="emphasis"><em>noop</em></span> scheduler, have
   several common parameters that may be tuned for each block device. You can
   access these parameters with <code class="filename">sysfs</code> in the
   <code class="filename">/sys/block/&lt;device&gt;/queue/iosched/</code> directory. The
   following parameters are tuneable for the respective scheduler:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.2.11.3.1"><span class="term">Anticipatory scheduler</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.2.11.3.1.2.1.1"><span class="term"><code class="option">read_batch_expire</code></span></dt><dd><p>
         If write requests are scheduled, this is the time in milliseconds that
         reads are served before pending writes get a time slice. If writes are
         more important than reads, set this value lower than
         <code class="option">read_expire</code>.
        </p></dd><dt id="id-1.4.2.11.3.1.2.1.2"><span class="term"><code class="option">write_batch_expire</code></span></dt><dd><p>
         Similar to <code class="option">read_batch_expire</code> for write requests.
        </p></dd></dl></div></dd><dt id="id-1.4.2.11.3.2"><span class="term">Deadline scheduler</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.2.11.3.2.2.1.1"><span class="term"><code class="option">read_expire</code></span></dt><dd><p>
         The main focus of this scheduler is to limit the start latency for a
         request to a given time. Therefore, for each request, a deadline is
         calculated from the current time plus the value of
         <code class="option">read_expire</code> in milliseconds.
        </p></dd><dt id="id-1.4.2.11.3.2.2.1.2"><span class="term"><code class="option">write_expire</code></span></dt><dd><p>
         Similar to <code class="option">read_expire</code> for write requests.
        </p></dd><dt id="id-1.4.2.11.3.2.2.1.3"><span class="term"><code class="option">fifo_batch</code></span></dt><dd><p>
         If a request hits its deadline, it is necessary to move the request
         from the sorted I/O scheduler list to the dispatch queue. The variable
         <code class="option">fifo_batch</code> controls how many requests are moved,
         depending on the cost of each request.
        </p></dd><dt id="id-1.4.2.11.3.2.2.1.4"><span class="term"><code class="option">front_merges</code></span></dt><dd><p>
         The scheduler normally tries to find contiguous I/O requests and
         merges them. There are two kinds of merges: The new I/O request may be
         in front of the existing I/O request (front merge), or it may follow
         behind the existing request (back merge). Most merges are back merges.
         Therefore, you can disable the front merge functionality by setting
         <code class="option">front_merges</code> to <code class="literal">0</code>.
        </p></dd><dt id="id-1.4.2.11.3.2.2.1.5"><span class="term"><code class="option">write_starved</code></span></dt><dd><p>
         In case some read or write requests hit their deadline, the scheduler
         prefers the read requests by default. To prevent write requests from
         being postponed forever, the variable <code class="option">write_starved</code>
         controls how often read requests are preferred until write requests
         are preferred over read requests.
        </p></dd></dl></div></dd><dt id="id-1.4.2.11.3.3"><span class="term">CFQ Scheduler</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.2.11.3.3.2.1.1"><span class="term"><code class="option">back_seek_max</code> and <code class="option">back_seek_penalty</code></span></dt><dd><p>
         The <span class="emphasis"><em>CFQ</em></span> scheduler normally uses a strict
         ascending elevator. When needed, it also allows small backward seeks,
         but it puts some penalty on them. The maximum backward sector seek is
         defined with <code class="option">back_seek_max</code>, and the multiplier for
         the penalty is set by <code class="option">back_seek_penalty</code>.
        </p></dd><dt id="id-1.4.2.11.3.3.2.1.2"><span class="term"><code class="option">fifo_expire_async</code> and <code class="option">fifo_expire_sync</code></span></dt><dd><p>
         The <code class="option">fifo_expire_*</code> variables define the timeout in
         milliseconds for asynchronous and synchronous I/O requests. To prefer
         synchronous operations over asynchronous ones,
         <code class="option">fifo_expire_sync</code> value should be lower than
         fifo_expire_async.
        </p></dd><dt id="id-1.4.2.11.3.3.2.1.3"><span class="term"><code class="option">quantum</code></span></dt><dd><p>
         Defines number of I/O requests to be dispatched at once by the block
         device. This parameter is used for synchronous requests.
        </p></dd><dt id="id-1.4.2.11.3.3.2.1.4"><span class="term"><code class="option">slice_async</code>, <code class="option">slice_async_rq</code>, <code class="option">slice_sync</code>, and <code class="option">slice_idle</code></span></dt><dd><p>
         These variables define the time slices a block device gets for
         synchronous or asynchronous operations.
        </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
           <code class="option">slice_async</code> and <code class="option">slice_sync</code> serve
           as a base value in milliseconds for asynchronous or synchronous disk
           slice length calculations.
          </p></li><li class="listitem"><p>
           <code class="option">slice_async_rq</code> for how many requests can an
           asynchronous disk slice accommodate.
          </p></li><li class="listitem"><p>
           <code class="option">slice_idle</code> defines how long I/O scheduler idles
           before servicing next thread.
          </p></li></ul></div></dd></dl></div></dd></dl></div><p>
   The system default Block Device I/O Scheduler can be also set by the kernel
   parameter <code class="literal">elevator=</code>. For example,
   <code class="literal">elevator=deadline</code> changes the I/O Scheduler to
   <code class="literal">deadline</code>.
  </p></section><section class="sect1" id="sec-quick-more" data-id-title="More information"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">10 </span><span class="title-name">More information</span></span> <a title="Permalink" class="permalink" href="article-setup.html#sec-quick-more">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-slert/edit/main/xml/article_setup.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   A lot of information about real-time implementations and administration can
   be found on the Internet. The following list contains several selected
   links:

  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     More detailed information about the real-time Linux development and an
     introduction how to write a real-time application can be found in the
     real-time Linux community Wiki.
     <a class="link" href="https://rt.wiki.kernel.org" target="_blank">https://rt.wiki.kernel.org</a>, <a class="link" href="https://rt.wiki.kernel.org/index.php/HOWTO:_Build_an_RT-application" target="_blank">https://rt.wiki.kernel.org/index.php/HOWTO:_Build_an_RT-application</a>
    </p></li><li class="listitem"><p>
     The <code class="systemitem">cpuset</code> feature of the kernel is explained in
     <code class="filename">/usr/src/linux/Documentation/cgroups/cpusets.txt</code>.
     More detailed documentation is available from

     <a class="link" href="https://lwn.net/Articles/127936/" target="_blank">https://lwn.net/Articles/127936/</a>. --&gt;
    </p></li><li class="listitem"><p>
     For more information about the deadline I/O scheduler, refer to
     <a class="link" href="https://en.wikipedia.org/wiki/Deadline_scheduler" target="_blank">https://en.wikipedia.org/wiki/Deadline_scheduler</a>.

     In your installed system, find further information in
     <code class="filename">/usr/src/linux/Documentation/block/deadline-iosched.txt</code>.
    </p></li><li class="listitem"><p>
     The CFQ I/O scheduler is covered in detail in
     <a class="link" href="https://en.wikipedia.org/wiki/CFQ" target="_blank">https://en.wikipedia.org/wiki/CFQ</a> and
     <code class="filename">/usr/src/linux/Documentation/block/cfq-iosched.txt</code>.
    </p></li></ul></div></section></section><nav class="bottom-pagination"><div> </div><div><a class="pagination-link next" href="bk02ar01apa.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Appendix A </span>GNU Licenses</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="article-setup.html#sec-slert-quick-overview"><span class="title-number">1 </span><span class="title-name">Product overview</span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-slert-quick-install"><span class="title-number">2 </span><span class="title-name">Installing SUSE Linux Enterprise Real Time</span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-slert-quick-cset"><span class="title-number">3 </span><span class="title-name">Managing CPU sets with <code class="command">cset</code></span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-slert-csets-tree"><span class="title-number">4 </span><span class="title-name">Managing tree-like structures with <code class="command">cset</code></span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-chrt"><span class="title-number">5 </span><span class="title-name">Setting Real-time Attributes of a Process with <code class="command">chrt</code></span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-taskset"><span class="title-number">6 </span><span class="title-name">Specifying CPU affinity with <code class="command">taskset</code></span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-ionice"><span class="title-number">7 </span><span class="title-name">Changing I/O priorities with <code class="command">ionice</code></span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-io-block-change"><span class="title-number">8 </span><span class="title-name">Changing the I/O scheduler for block devices</span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-io-block-tune"><span class="title-number">9 </span><span class="title-name">Tuning the block device I/O scheduler</span></a></span></li><li><span class="sect1"><a href="article-setup.html#sec-quick-more"><span class="title-number">10 </span><span class="title-name">More information</span></a></span></li><li><span class="appendix"><a href="bk02ar01apa.html"><span class="title-number">A </span><span class="title-name">GNU Licenses</span></a></span><ul><li><span class="sect1"><a href="bk02ar01apa.html#id-1.4.2.13.4"><span class="title-number">A.1 </span><span class="title-name">GNU Free Documentation License</span></a></span></li></ul></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>